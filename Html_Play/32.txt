<script>
function CallSecureApi(s) {
  return fetch("/Cover/SecureWithCallApi", { // <-- thêm return
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(s)
  })
  .then(res => res.text()) // lấy raw text trước
  .then(text => {
    try {
      return JSON.parse(text); // thử parse JSON
    } catch {
      return text; // nếu không phải JSON thì in text
    }
  })
  .catch(console.error);
}

async function CallSecureApi_Data(s) {
  var re = await CallSecureApi(s);
  console.log(re); // đây sẽ in ra dữ liệu thực sự
  return re;
}

</script>
