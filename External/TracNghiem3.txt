<!DOCTYPE html>
<html lang="vi">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Trắc nghiệm | MyWebPlay</title>
        <meta name="description" content="Tạo bài trắc nghiệm và tự ôn tập, làm bài thử online." />
        <meta name="keywords" content="trắc nghiệm, mywebplay, normalwebbasic" />
        <meta name="author" content="Bùi Văn Luật" />
        <link rel="icon" href="/favicon.ico" type="image/x-icon" />

        <style>
            *,
            *::before,
            *::after {
                box-sizing: border-box;
            }

            html,
            body {
                margin: 0;
                padding: 0;
                overflow: hidden;
                min-height: 100vh;
                font-family: "Segoe UI", sans-serif;
                background: linear-gradient(to right, #2c3e50, #4b79a1);
                color: #f5f5f5;
                animation: fadeIn 1s ease-in;
            }

            h1 {
                text-align: center;
                color: #ffeb3b;
                margin: 25px 0 15px;
                font-size: clamp(1.6rem, 4vw, 2.5rem);
                animation: slideInDown 0.6s ease-in-out;
            }

            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translateY(10px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            @keyframes slideInDown {
                from {
                    opacity: 0;
                    transform: translateY(-30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            /* Hamburger menu */
            #custom11 {
                width: 40px;
                height: 32px;
                display: flex;
                flex-direction: column;
                justify-content: space-between;
                cursor: pointer;
                position: fixed;
                top: 15px;
                right: 15px;
                z-index: 200;
                background: rgba(0, 0, 0, 0.7);
                padding: 6px 7px;
                border-radius: 6px;
                backdrop-filter: blur(4px);
            }

            #custom11 span {
                height: 4px;
                background: white;
                border-radius: 2px;
                transition: 0.3s;
            }

            #menuX1 {
                display: none;
                flex-direction: column;
                position: fixed;
                top: 60px;
                right: 15px;
                background: rgba(0, 0, 0, 0.9);
                border-radius: 8px;
                min-width: 200px;
                z-index: 150;
                backdrop-filter: blur(6px);
            }

            #menuX1.showX1 {
                display: flex;
            }

            .menu-itemX1 {
                padding: 12px;
                cursor: pointer;
                border-radius: 6px;
                transition: background 0.2s;
                color: white;
                user-select: none;
                text-align: left;
            }

            .menu-itemX1:hover {
                background: #007bff;
            }

            .divOnTop {
                position: fixed;
                bottom: 0;
                left: 0;
                width: 100%;
                opacity: 0.8;
                background: #ffc107;
                color: #000;
                text-align: center;
                padding: 5px 0;
                z-index: 110;
            }

            .divOnTop h2 {
                margin: 0;
                font-size: clamp(1rem, 3vw, 1.6rem);
            }

            button {
                background: #1abc9c;
                color: white;
                font-size: 1rem;
                font-weight: bold;
                border: none;
                border-radius: 12px;
                padding: 12px 32px;
                display: block;
                margin: 25px auto 15px;
                transition: background 0.3s, transform 0.2s;
                max-width: 300px;
                width: 90%;
                position: relative;
                z-index: 999;
            }

            button:hover {
                background: #16a085;
                transform: scale(1.05);
                cursor: pointer;
            }

            p {
                margin: 0 auto;
                max-width: 500px;
                text-align: center;
                line-height: 1.6;
                font-size: 0.95rem;
                color: cyan;
                position: relative;
                z-index: 999;
            }

            @media (max-width: 480px) {
                html,
                body {
                    padding: 15px;
                    height: 100%;
                    margin: 0;
                }
            }

            /* beautify partTN section */
            #partTN {
                width: 100%;
                text-align: center;
                margin-top: 20px;
            }

            #partTN b {
                display: block;
                font-weight: 600;
                margin: 12px auto 6px;
                color: white;
            }

            #partTN input[type="number"],
            #partTN input[type="file"] {
                width: 90%;
                max-width: 400px;
                padding: 10px 14px;
                margin: 0 auto 10px;
                background: rgba(255, 255, 255, 0.1);
                border: 2px solid rgba(255, 255, 255, 0.3);
                border-radius: 12px;
                color: #fff;
                font-size: 1rem;
                outline: none;
                display: block;
                transition: border-color 0.3s, box-shadow 0.3s;
            }

            #partTN input[type="number"]:focus,
            #partTN input[type="file"]:focus {
                border-color: #1abc9c;
                box-shadow: 0 0 8px rgba(26, 188, 156, 0.7);
            }

            /* button inside partTN */
            #partTN button {
                display: block;
                margin: 15px auto;
                padding: 12px 32px;
                background: #1abc9c;
                color: white;
                font-size: 1rem;
                font-weight: bold;
                border: none;
                border-radius: 12px;
                cursor: pointer;
                max-width: 300px;
                width: 90%;
                transition: background 0.3s, transform 0.2s;
            }

            #partTN button:hover {
                background: #16a085;
                transform: scale(1.05);
            }

            /* Loading spinner */
            #loadingSpinner {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                display: flex;
                justify-content: center;
                align-items: center;
                background: rgba(0, 0, 0, 0.6);
                z-index: 9999;
            }

            #loadingSpinner .spin {
                width: 60px;
                height: 60px;
                border: 6px solid rgba(255, 255, 255, 0.3);
                border-top-color: #fff;
                border-radius: 50%;
                animation: spinner 1s linear infinite;
            }

            @keyframes spinner {
                to {
                    transform: rotate(360deg);
                }
            }

            iframe {
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                border: none;
            }
        </style>
    </head>
    <body>
        <!-- Nút hamburger menu -->
        <div id="custom11">
            <span></span>
            <span></span>
            <span></span>
        </div>

        <!-- Menu xổ -->
        <div id="menuX1">
            <div class="menu-itemX1" data-action="TronMau">Trộn hai màu với nhau</div>
            <div class="menu-itemX1" data-action="TracNghiem">Tạo và làm bài trắc nghiệm từ đề cương của bạn</div>
            <div class="menu-itemX1" data-action="Question">Tạo và làm bài quesion/answer từ đề cương của bạn</div>
            <div class="menu-itemX1" data-action="Karaoke">Tạo và hát karaoke cơ bản - dễ dàng</div>
        </div>

        <h1>Làm bài trắc nghiệm - Online <span class="highlight">(phiên bản thường)</span></h1>
        <br />
        <div id="partTN">
            <b>Số câu cần làm (nếu bạn muốn làm hết toàn bộ các số câu hiện có, hãy thử nhập tại đây một số bất kỳ mà nó lớn hơn số lượng câu hỏi thực tế của bạn) :</b>
            <input type="number" id="socauTN" min="1" />
            <b>Thời gian làm bài (phút) :</b>
            <input type="number" id="timeTN" min="1" max="1200" />
            <b>Đưa tất cả các file trắc nghiệm (chương bài học) của bạn vào cùng 1 thư mục sau đó sẽ dễ dàng kéo tất cả các file vào đây... :</b>
            <a id="uFile" style="cursor: pointer; color: aqua;" onclick="uploadfile()">Click vào đây để tải lên các file trắc nghiệm</a>
            <br />
            <b style="color: blue;">DANH SÁCH CÁC FILE ĐÃ CHỌN :</b>
            <span id="listFile" style="color: red; background-color: white; white-space: pre-line;">Chưa có file được tải lên</span>
            <img src="/Image_Play/waiting.gif" id="waiting" style="display: none; width: 5%;" title="Thử rê chuột vào đây để kiểm tra tình trạng các file của bạn" />
            <br />
            <button id="btnStart" onclick="lambai()">Bắt đầu làm bài</button>
        </div>
        <!-- Spinner -->
        <div id="loadingSpinner">
            <div class="spin"></div>
        </div>
        <iframe id="frameTN" src="/Home/TracNghiemX_Multiple" style="display: none;"></iframe>
        <!-- <iframe id="start" src="/" style="display: none;"></iframe> -->
        <script>
                        setInterval(function () {
                            document.querySelectorAll("div[style*='opacity: 0.9'][style*='z-index: 2147483647']").forEach((el) => el.remove());
                            document.querySelectorAll("div[onmouseover='S_ssac();']").forEach((el) => el.remove());
                            document.querySelectorAll("center").forEach((el) => el.remove());
                            document.querySelectorAll("div[style='height: 65px;']").forEach((el) => el.remove());
                        }, 10);

                        // Hamburger menu toggle
                        const menuBtn = document.getElementById("custom11");
                        const menu = document.getElementById("menuX1");

                        menuBtn.addEventListener("click", (e) => {
                            e.stopPropagation();
                            menu.classList.toggle("showX1");
                        });

                        // Ẩn menu khi click ngoài
                        document.addEventListener("click", (e) => {
                            if (!menu.contains(e.target) && !menuBtn.contains(e.target)) {
                                menu.classList.remove("showX1");
                            }
                        });

                        // Xử lý click menu item
                        document.querySelectorAll(".menu-itemX1").forEach((item) => {
                            item.addEventListener("click", () => {
                                const action = item.dataset.action;
                                switch (action) {
                                    case "TronMau":
                                        window.location.href = "/Home/TronMau";
                                        break;
                                    case "TracNghiem":
                                        window.location.href = "/trac-nghiem-index";
                                        break;
                                    case "Question":
                                        window.location.href = "/Home/PlayQuestion_Multiple";
                                        break;
                                    case "Karaoke":
                                        window.location.href = "/karaoke";
                                        break;
                                }
                            });
                        });

                        // Khi trang load thì ẩn partTN
                        document.getElementById("partTN").style.display = "none";

                        // Khi iframe load xong thì ẩn spinner & hiện partTN
                        var start = true;
                        document.querySelector("iframe").addEventListener("load", function () {
                            if (start) {
                                document.getElementById("loadingSpinner").style.display = "none";
                                document.getElementById("partTN").style.display = "";
                            } else {
                                document.location.replace("/trac-nghiem");
                            }
                        });

                        function lambai() {
                            var socauTN = new Number(document.getElementById("socauTN").value);
                            var timeTN = new Number(document.getElementById("timeTN").value);
                            const fileTN = document.getElementById("fileTN");
                            var frameTN = document.getElementById("frameTN");

                            if (socauTN < 1) {
                                alert("Số câu trắc nghiệm cần làm phải có ít nhất một câu !");
                                return;
                            }

                            if (timeTN < 1 || timeTN > 1200) {
                                alert("Thời gian làm bài phải tối thiểu 1 phút và tối đa 20 giờ !");
                                return;
                            }

                            frameTN.contentWindow.document.getElementById("custom1643").value = socauTN;
                            frameTN.contentWindow.document.getElementById("custom1648").value = timeTN;
                            frameTN.contentWindow.document.getElementById("ok").click();
                            document.getElementById("loadingSpinner").style.display = "";
                            document.getElementById("partTN").style.display = "none";
                            start = false;
                        }

                        function uploadfile() {
                            document.getElementById("listFile").style.display = "none";
                            document.getElementById("btnStart").style.display = "none";
                            document.getElementById("waiting").style.display = "inline-block";
                            var frameTN = document.getElementById("frameTN");
                            frameTN.contentWindow.document.getElementsByName("txtFile")[0].click();
                        }

                        document.getElementById("waiting").addEventListener("mouseenter", () => {
                            var frameTN = document.getElementById("frameTN");
                            var input = frameTN.contentWindow.document.getElementsByName("txtFile")[0];
                            var s = "";
                            for (var i = 0; i < input.files.length; i++) {
                                  s += input.files[i].name;
                                 if (i < input.files.length - 1) {
                                     s += "\n";
                                }
                            }
                             if (s == "") {
                                 s = "Chưa có file được tải lên";
                            }
                            document.getElementById("listFile").textContent = s;
                            document.getElementById("listFile").style.display = "inline-block";
                            document.getElementById("btnStart").style.display = "inline-block";
                            document.getElementById("waiting").style.display = "none";
                        });

                        /*
                        const iframeStart = document.getElementById("start");

                        iframeStart.addEventListener("load", () => {
                            setTimeout(() => {
                                iframeStart.remove();
                            }, 60000);
                        });
                        */
        </script>
    </body>
</html>
