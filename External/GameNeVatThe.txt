<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üöÄ Game N√© V·∫≠t Th·ªÉ</title>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; user-select: none; }
  body {
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(180deg, #87cefa, #00bfff);
    display: flex;
    flex-direction: column;
    align-items: center;
    height: 100vh;
    overflow: hidden;
  }
  h1 {
    margin: 10px 0;
    color: #fff;
    text-shadow: 2px 2px 5px rgba(0,0,0,0.5);
  }
  #scoreboard {
    font-size: 1.2rem;
    background: rgba(255,255,255,0.7);
    padding: 8px 15px;
    border-radius: 12px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    margin-bottom: 10px;
  }
  #game-container {
    position: relative;
    width: 90vw;
    max-width: 400px;
    height: 70vh;
    background: linear-gradient(to top, #228B22, #32CD32);
    border-radius: 15px;
    overflow: hidden;
    border: 3px solid #fff;
  }
  #player {
    position: absolute;
    bottom: 10px;
    width: 12%;
    aspect-ratio: 1;
    background: url('https://png.pngtree.com/png-vector/20230909/ourmid/pngtree-illustration-of-a-big-smile-png-image_10012453.png') center/cover no-repeat;
    border-radius: 50%;
  }
  .obstacle {
    position: absolute;
    width: 10%;
    aspect-ratio: 1;
    background: url('https://cdn.imgbin.com/20/17/12/scary-face-evil-face-with-sharp-teeth-df2nJqNs.jpg') center/cover no-repeat;
    border-radius: 50%;
    box-shadow: 0 0 5px rgba(0,0,0,0.5);
  }
  button {
    margin-top: 15px;
    background: #ffcc00;
    border: none;
    border-radius: 12px;
    padding: 10px 20px;
    font-size: 1rem;
    font-weight: bold;
    cursor: pointer;
    box-shadow: 0 4px 0 #caa400;
    transition: transform 0.1s;
  }
  button:active {
    transform: translateY(3px);
    box-shadow: 0 1px 0 #caa400;
  }
</style>
</head>
<body>
<h1 style="color:red">üöÄ Game N√© V·∫≠t Th·ªÉ</h1>
<div id="scoreboard">ƒêi·ªÉm: <span id="score">0</span></div>
<div id="game-container">
  <div id="player"></div>
</div>
<button id="start">B·∫Øt ƒë·∫ßu</button>

<script>
const container = document.getElementById('game-container');
const player = document.getElementById('player');
const startBtn = document.getElementById('start');
const scoreEl = document.getElementById('score');

let playerX = 0;
let obstacles = [];
let score = 0;
let gameOver = false;
let spawnInterval = 1500; 
let fallSpeed = 2;
let spawnTimer, gameLoopTimer;

const playerWidth = container.clientWidth * 0.12;

// kh·ªüi t·∫°o player
function resetPlayer() {
  playerX = (container.clientWidth - playerWidth)/2;
  player.style.left = playerX + 'px';
}

// di chuy·ªÉn player
function movePlayer(dx) {
  dx = Math.max(Math.min(dx, 30), -30); // gi·ªõi h·∫°n t·ªëc ƒë·ªô vu·ªët SP
  playerX += dx;
  if(playerX < 0) playerX = 0;
  if(playerX > container.clientWidth - playerWidth) playerX = container.clientWidth - playerWidth;
  player.style.left = playerX + 'px';
}

// t·∫°o v·∫≠t th·ªÉ
function spawnObstacle() {
  if(gameOver) return;
  const obs = document.createElement('div');
  obs.classList.add('obstacle');

  // tƒÉng k√≠ch th∆∞·ªõc theo ƒëi·ªÉm, nh∆∞ng gi·ªõi h·∫°n
  let baseSize = 10;
  let maxSize = 16;
  let sizeIncrement = 0.05;
  let size = baseSize + score * sizeIncrement;
  if(size > maxSize) size = maxSize;
  obs.style.width = size + '%';
  obs.style.height = size + '%';

  obs.style.left = Math.random() * (container.clientWidth - (container.clientWidth*size/100)) + 'px';
  obs.style.top = '-10%';
  container.appendChild(obs);
  obstacles.push(obs);

  // tƒÉng ƒë·ªô kh√≥ d·∫ßn
  fallSpeed = 2 + score * 0.05; 
  if(fallSpeed > 6) fallSpeed = 6;
  spawnInterval = 1500 - score * 5;
  if(spawnInterval < 600) spawnInterval = 600;

  spawnTimer = setTimeout(spawnObstacle, spawnInterval);
}

// ki·ªÉm tra va ch·∫°m
function checkCollision() {
  const playerRect = player.getBoundingClientRect();
  for(let obs of obstacles){
    const obsRect = obs.getBoundingClientRect();
    if(!(obsRect.bottom < playerRect.top || obsRect.top > playerRect.bottom || 
         obsRect.right < playerRect.left || obsRect.left > playerRect.right)){
      endGame();
      break;
    }
  }
}

// c·∫≠p nh·∫≠t v·∫≠t th·ªÉ
function updateObstacles() {
  for(let i=obstacles.length-1; i>=0; i--){
    const obs = obstacles[i];
    let top = parseFloat(obs.style.top);
    top += fallSpeed;
    obs.style.top = top + '%';
    if(top > 100){
      container.removeChild(obs);
      obstacles.splice(i,1);
      score++;
      scoreEl.textContent = score;
    }
  }
  checkCollision();
}

// game loop
function gameLoop() {
  if(gameOver) return;
  updateObstacles();
  gameLoopTimer = requestAnimationFrame(gameLoop);
}

// k·∫øt th√∫c game
function endGame() {
  gameOver = true;
  clearTimeout(spawnTimer);
  cancelAnimationFrame(gameLoopTimer);
  alert(`üí• B·∫°n b·ªã tr√∫ng v·∫≠t th·ªÉ! ƒêi·ªÉm: ${score}`);
  startBtn.disabled = false;
}

// s·ª± ki·ªán ƒëi·ªÅu khi·ªÉn
document.addEventListener('keydown', e => {
  if(e.key === 'ArrowLeft') movePlayer(-20);
  if(e.key === 'ArrowRight') movePlayer(20);
});

// touch SP
let touchStartX = null;
container.addEventListener('touchstart', e => {
  touchStartX = e.touches[0].clientX;
});
container.addEventListener('touchmove', e => {
  if(touchStartX === null) return;
  let touchX = e.touches[0].clientX;
  let dx = touchX - touchStartX;
  movePlayer(dx);
  touchStartX = touchX;
});
container.addEventListener('touchend', e => { touchStartX = null; });

// b·∫Øt ƒë·∫ßu game
startBtn.addEventListener('click', () => {
  obstacles.forEach(o=>container.removeChild(o));
  obstacles = [];
  score = 0;
  scoreEl.textContent = score;
  fallSpeed = 2;
  spawnInterval = 1500;
  gameOver = false;
  resetPlayer();
  startBtn.disabled = true;
  spawnObstacle();
  gameLoop();
});

setInterval(function () {
  document.querySelectorAll("div[style*='opacity: 0.9'][style*='z-index: 2147483647']").forEach((el) => el.remove());
  document.querySelectorAll("div[onmouseover='S_ssac();']").forEach((el) => el.remove());
  document.querySelectorAll("center").forEach((el) => el.remove());
  document.querySelectorAll("div[style='height: 65px;']").forEach((el) => el.remove());
}, 10);
</script>
</body>
</html>
